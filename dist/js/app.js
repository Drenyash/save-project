(function(){"use strict";var e={2189:function(e,t,o){var r=o(9242),n=o(3396),a=o(7139);const s=e=>((0,n.dD)("data-v-00a6956f"),e=e(),(0,n.Cn)(),e),c={class:"save-project__wrapper"},l={class:"save-project__header"},i=s((()=>(0,n._)("h2",{class:"save-project__title"},"Сохранить в «Мои проекты»",-1))),d={class:"save-project__content"},p={class:"save-project__footer"},u=(0,n.uE)('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-00a6956f><g clip-path="url(#clip0_878_26964)" data-v-00a6956f><path d="M25.3346 8.88L23.4546 7L16.0013 14.4533L8.54797 7L6.66797 8.88L14.1213 16.3333L6.66797 23.7867L8.54797 25.6667L16.0013 18.2133L23.4546 25.6667L25.3346 23.7867L17.8813 16.3333L25.3346 8.88Z" fill="#4A4A4A" data-v-00a6956f></path></g><defs data-v-00a6956f><clipPath id="clip0_878_26964" data-v-00a6956f><rect width="32" height="32" fill="white" data-v-00a6956f></rect></clipPath></defs></svg>',1),h=[u];function m(e,t,o,r,s,u){const m=(0,n.up)("AppSearch"),v=(0,n.up)("AppProjects"),_=(0,n.up)("TheLoader"),w=(0,n.up)("TheButton"),f=(0,n.up)("AppModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[s.windowIsOpen?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"save-project",ref:"draggable",style:(0,a.j5)({transform:`translate(${s.object.x}px, ${s.object.y}px)`}),onMousedown:t[2]||(t[2]=(...e)=>u.startDrag&&u.startDrag(...e)),onMousemove:t[3]||(t[3]=(...e)=>u.drag&&u.drag(...e)),onMouseup:t[4]||(t[4]=(...e)=>u.stopDrag&&u.stopDrag(...e))},[(0,n._)("div",c,[(0,n._)("div",l,[i,(0,n.Wm)(m,{onSearchText:u.searchedData},null,8,["onSearchText"])]),(0,n._)("div",d,[s.projects.length?((0,n.wg)(),(0,n.j4)(v,{key:0,projects:u.filteredProjects,onAddNewRoom:t[0]||(t[0]=e=>s.roomId=e),currentProduct:s.currentProduct,onAddNewMaterial:u.addSavedMaterial,onOpenCreateModal:u.openCreateRoomModal},null,8,["projects","currentProduct","onAddNewMaterial","onOpenCreateModal"])):((0,n.wg)(),(0,n.j4)(_,{key:1}))]),(0,n._)("div",p,[(0,n.Wm)(w,{onClick:u.openCreateProjectModal},{default:(0,n.w5)((()=>[(0,n.Uk)("Создать проект")])),_:1},8,["onClick"])])]),(0,n._)("button",{class:"save-project__close",onClick:t[1]||(t[1]=e=>s.windowIsOpen=!1)},h)],36)):(0,n.kq)("",!0),(0,n.Wm)(f,{"modal-is-open":s.modalProjectIsOpen,"onUpdate:modalIsOpen":t[5]||(t[5]=e=>s.modalProjectIsOpen=e),onCreateNewProject:u.createNewProject,modalId:1},{header:(0,n.w5)((()=>[(0,n.Uk)("Создание проекта")])),text:(0,n.w5)((()=>[(0,n.Uk)("Создайте общий проект и наполните его объектами или комнатами")])),_:1},8,["modal-is-open","onCreateNewProject"]),(0,n.Wm)(f,{"modal-is-open":s.modalRoomIsOpen,"onUpdate:modalIsOpen":t[6]||(t[6]=e=>s.modalRoomIsOpen=e),onCreateNewRoom:u.addNewRoom,modalId:2,roomId:s.roomId},{header:(0,n.w5)((()=>[(0,n.Uk)("Создание комнаты")])),text:(0,n.w5)((()=>[(0,n.Uk)("Добавляйте комнаты к готовому проекту")])),_:1},8,["modal-is-open","onCreateNewRoom","roomId"])],64)}o(7658);const v=e=>((0,n.dD)("data-v-00b59e9e"),e=e(),(0,n.Cn)(),e),_=v((()=>(0,n._)("svg",{class:"search__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 18",fill:"none"},[(0,n._)("ellipse",{cx:"7.606",cy:"7",stroke:"#838383","stroke-linecap":"round","stroke-linejoin":"round",rx:"4.927",ry:"5"}),(0,n._)("path",{stroke:"#838383","stroke-linecap":"round","stroke-linejoin":"round",d:"m16.475 16-4.927-5"})],-1)));function w(e,t,o,s,c,l){return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["search",{"search__input--typing":c.text.length}])},[_,(0,n.wy)((0,n._)("input",{class:"search__input","onUpdate:modelValue":t[0]||(t[0]=e=>c.text=e),onInput:t[1]||(t[1]=(...e)=>l.searchedText&&l.searchedText(...e)),type:"text",placeholder:"Искать проект"},null,544),[[r.nr,c.text]])],2)}var f={data(){return{text:""}},methods:{searchedText(){this.$emit("searchText",this.text)}}},g=o(89);const j=(0,g.Z)(f,[["render",w],["__scopeId","data-v-00b59e9e"]]);var b=j;const I=e=>((0,n.dD)("data-v-275ecb30"),e=e(),(0,n.Cn)(),e),C={class:"v-button"},M=I((()=>(0,n._)("span",{class:"v-button__icon"},[(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18",fill:"none"},[(0,n._)("path",{fill:"#5A7384","fill-rule":"evenodd",d:"M16 10H2V8h14v2Z","clip-rule":"evenodd"}),(0,n._)("path",{fill:"#5A7384","fill-rule":"evenodd",d:"M8 16V2h2v14H8Z","clip-rule":"evenodd"})])],-1)));function P(e,t,o,r,a,s){return(0,n.wg)(),(0,n.iD)("button",C,[M,(0,n.WI)(e.$slots,"default",{},void 0,!0)])}var k={};const x=(0,g.Z)(k,[["render",P],["__scopeId","data-v-275ecb30"]]);var N=x;const O={class:"projects"};function R(e,t,o,r,a,s){const c=(0,n.up)("AppProject");return(0,n.wg)(),(0,n.iD)("div",O,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.projects,(e=>((0,n.wg)(),(0,n.j4)(c,{project:e,key:e.id,currentProduct:o.currentProduct,onAddNewMaterial:t[0]||(t[0]=(e,t,o)=>this.$emit("addNewMaterial",e,t,o)),onAddNewRoom:s.addNewRoom,onOpenCreateModal:s.openCreateModal},null,8,["project","currentProduct","onAddNewRoom","onOpenCreateModal"])))),128))])}const y={class:"project"},D={class:"project__title"};function T(e,t,o,r,s,c){const l=(0,n.up)("AppProjectRooms"),i=(0,n.up)("TheButton");return(0,n.wg)(),(0,n.iD)("div",y,[(0,n._)("h3",D,(0,a.zw)(o.project.title),1),(0,n.Wm)(l,{projectRooms:o.project.rooms,onAddNewMaterial:t[0]||(t[0]=(e,t,o)=>this.$emit("addNewMaterial",e,t,o)),currentProduct:o.currentProduct},null,8,["projectRooms","currentProduct"]),(0,n.Wm)(i,{class:"",onClick:c.openCreateModal},{default:(0,n.w5)((()=>[(0,n.Uk)("Добавить комнату")])),_:1},8,["onClick"])])}const A={class:"project__rooms"};function L(e,t,o,r,a,s){const c=(0,n.up)("AppProjectRoom");return(0,n.wg)(),(0,n.iD)("div",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.projectRooms,(e=>((0,n.wg)(),(0,n.j4)(c,{room:e,key:e.id,onAddNewMaterial:t[0]||(t[0]=(e,t,o)=>this.$emit("addNewMaterial",e,t,o)),currentProduct:o.currentProduct},null,8,["room","currentProduct"])))),128))])}const Z={class:"room"},U=["src","alt"],$={class:"room__info"},S={class:"room__title"};function V(e,t,o,r,s,c){const l=(0,n.up)("TheButton");return(0,n.wg)(),(0,n.iD)("div",Z,[(0,n._)("picture",{class:"room__picture",onClick:t[0]||(t[0]=(...e)=>c.showInfo&&c.showInfo(...e))},[(0,n._)("img",{src:o.room.picture,class:(0,a.C_)({empty:o.room.picture.includes(".svg")}),alt:o.room.roomTitle},null,10,U)]),(0,n._)("div",$,[(0,n._)("h3",S,(0,a.zw)(o.room.roomTitle),1),(0,n.Wm)(l,{class:"v-button--save",onClick:c.saveToRoom},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(s.isSaved?"Добавлено":"Сохранить"),1)])),_:1},8,["onClick"])])])}var B={components:{TheButton:N},data(){return{isSaved:!1}},props:{room:Object,currentProduct:String},methods:{showInfo(){console.log(this.room)},saveToRoom(){this.isSaved=!0;const e={id:Date.now(),name:this.currentProduct,article:8252791,price:223500};this.$emit("addNewMaterial",e,this.room.roomId,this.room.id),setTimeout((()=>{this.isSaved=!1}),1e3)}}};const W=(0,g.Z)(B,[["render",V],["__scopeId","data-v-13f7f416"]]);var H=W,Y={components:{AppProjectRoom:H},props:{projectRooms:Object,currentProduct:String}};const F=(0,g.Z)(Y,[["render",L],["__scopeId","data-v-6b51f731"]]);var X=F,q={components:{AppProjectRooms:X,TheButton:N},props:{project:Object,currentProduct:String},methods:{openCreateModal(){this.$emit("openCreateModal",!0),this.addNewRoom()},addNewRoom(){this.$emit("addNewRoom",this.project.id)}}};const E=(0,g.Z)(q,[["render",T],["__scopeId","data-v-3f0eabb0"]]);var z=E,K={components:{AppProject:z},props:{projects:Object,currentProduct:String},methods:{addNewRoom(e){this.$emit("addNewRoom",e)},openCreateModal(){this.$emit("openCreateModal",!0)}}};const G=(0,g.Z)(K,[["render",R],["__scopeId","data-v-430b4dd2"]]);var J=G;const Q=e=>((0,n.dD)("data-v-914883b8"),e=e(),(0,n.Cn)(),e),ee={class:"modal__header"},te={class:"modal__title"},oe={class:"modal__content"},re={class:"modal__picture"},ne=["src"],ae={class:"modal__info"},se={class:"modal__text"},ce=["placeholder"],le={class:"dangerous hidden",ref:"dangerous"},ie={class:"modal__file"},de=Q((()=>(0,n._)("svg",{class:"modal__icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 23",fill:"none"},[(0,n._)("path",{"fill-rule":"evenodd",d:"M11 9.77a2.647 2.647 0 0 0-2.636 2.659A2.647 2.647 0 0 0 11 15.087a2.647 2.647 0 0 0 2.636-2.658A2.647 2.647 0 0 0 11 9.77ZM7.375 12.43c0-2.011 1.62-3.648 3.625-3.648s3.625 1.636 3.625 3.648c0 2.01-1.62 3.647-3.625 3.647s-3.625-1.636-3.625-3.647Z","clip-rule":"evenodd"}),(0,n._)("path",{"fill-rule":"evenodd",d:"M7.007 7.617H3.393v10.145h15.214V7.617h-3.614l-.659-2.146H7.666l-.66 2.146ZM6.82 4.328h8.358l.659 2.146h3.912v12.43H2.25V6.475h3.912l.66-2.146Z","clip-rule":"evenodd"}),(0,n._)("path",{d:"M4.64 8.427h2.286V9.57H4.641V8.427ZM16.464 8.427h1.143V9.57h-1.143V8.427Z"})],-1))),pe={class:"modal__footer"};function ue(e,t,o,s,c,l){const i=(0,n.up)("TheButton");return o.modalIsOpen?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"modal",onClick:t[3]||(t[3]=(...e)=>l.closeModal&&l.closeModal(...e))},[(0,n._)("div",{class:"modal__container",onClick:t[2]||(t[2]=(0,r.iM)((()=>{}),["stop"]))},[(0,n._)("div",ee,[(0,n._)("h2",te,[(0,n.WI)(e.$slots,"header",{},void 0,!0)])]),(0,n._)("div",oe,[(0,n._)("picture",re,[(0,n._)("img",{src:l.setImage,class:(0,a.C_)({empty:l.setImage.includes(".svg")}),alt:""},null,10,ne)]),(0,n._)("div",ae,[(0,n._)("p",se,[(0,n.WI)(e.$slots,"text",{},void 0,!0)]),(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{class:"modal__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>c.name=e),placeholder:l.placeholder},null,8,ce),[[r.nr,c.name]]),(0,n._)("span",le,"Ошибка! Название должно состоять минимум из 3-х символов!",512)]),(0,n._)("div",ie,[(0,n._)("input",{type:"file",onChange:t[1]||(t[1]=(...e)=>l.onFileChange&&l.onFileChange(...e))},null,32),de,(0,n._)("p",null,(0,a.zw)(null!==c.fileName?c.fileName:"Загрузить обложку"),1)])])]),(0,n._)("div",pe,[(0,n.Wm)(i,{class:"v-button--outline",onClick:l.closeModal},{default:(0,n.w5)((()=>[(0,n.Uk)("Отменить")])),_:1},8,["onClick"]),(0,n.Wm)(i,{class:"v-button--outline v-button--field",onClick:l.createFunc},{default:(0,n.w5)((()=>[(0,n.Uk)("Создать")])),_:1},8,["onClick"])])])])):(0,n.kq)("",!0)}o(2062);var he=o.p+"img/icon-logo.svg",me={components:{TheButton:N},props:{modalIsOpen:Boolean,modalId:Number,roomId:Number},data(){return{name:"",imageUrl:null,fileName:null}},methods:{closeModal(){this.$emit("update:modal-is-open",!1),this.name=""},createNewProject(){const e={id:Date.now(),title:this.name,picture:this.setImage,rooms:[]};this.name.length>=3&&(this.$emit("createNewProject",e),this.name="",this.imageUrl=null,this.fileName=null,this.closeModal())},createNewRoom(){const e={roomId:this.roomId,id:Date.now(),roomTitle:this.name,picture:this.setImage,materials:[]};this.name.length>=3&&(this.$emit("createNewRoom",e),this.name="",this.imageUrl=null,this.fileName=null,this.closeModal())},createFunc(){1===this.modalId?(this.createNewProject(),this.nameValidation()):(this.createNewRoom(),this.nameValidation())},onFileChange(e){const t=e.target.files[0];this.fileName=e.target.files[0].name,this.imageUrl=URL.createObjectURL(t)},nameValidation(){this.name.length>=3?this.$refs.dangerous.classList.add("hidden"):this.$refs.dangerous.classList.remove("hidden")}},computed:{placeholder(){return 1===this.modalId?"Название проекта, например, «Квартира №1»":"Название комнаты, например, «Детская»"},setImage(){return null!==this.imageUrl?this.imageUrl:he}}};const ve=(0,g.Z)(me,[["render",ue],["__scopeId","data-v-914883b8"]]);var _e=ve,we=o(4161);const fe={class:"loader"};function ge(e,t,o,r,a,s){return(0,n.wg)(),(0,n.iD)("div",fe)}var je={};const be=(0,g.Z)(je,[["render",ge],["__scopeId","data-v-6bf1faf2"]]);var Ie=be,Ce={components:{TheLoader:Ie,AppModal:_e,AppProjects:J,TheButton:N,AppSearch:b},data(){return{projects:[],searchedText:"",modalProjectIsOpen:!1,modalRoomIsOpen:!1,roomId:null,windowIsOpen:!1,currentProduct:"",url:"http://localhost:3001/projects/",object:{isDragging:!1,x:0,y:0}}},methods:{createNewProject(e){this.projects.push(e),we.Z.post(this.url,e).then((e=>console.log(e))).catch((e=>console.error(e)))},addNewRoom(e){this.projects.map((t=>{t.id===e.roomId&&(t.rooms.push(e),console.log(t.id),we.Z.put(this.url+t.id,t).then((e=>{console.log("Данные успешно обновлены:",e.data)})).catch((e=>{console.error("Ошибка при обновлении данных:",e)})))}))},openCreateProjectModal(){this.modalProjectIsOpen=!this.modalProjectIsOpen},openCreateRoomModal(){this.modalRoomIsOpen=!this.modalRoomIsOpen},searchedData(e){this.searchedText=e},addSavedMaterial(e,t,o){console.log(e),this.projects.map((t=>{t.rooms.map((r=>{r.id===o&&(console.log("Материал: "+e+" добавлен!"),r.materials.push(e),we.Z.put(this.url+t.id,t).then((e=>{console.log("Данные успешно обновлены:",e.data)})).catch((e=>{console.error("Ошибка при обновлении данных:",e)})))}))}))},startDrag(e){this.object.isDragging=!0,this.object.prevX=e.clientX,this.object.prevY=e.clientY},drag(e){if(this.object.isDragging){const t=e.clientX-this.object.prevX,o=e.clientY-this.object.prevY;this.object.x+=t,this.object.y+=o,this.object.prevX=e.clientX,this.object.prevY=e.clientY}},stopDrag(){this.object.isDragging=!1},fetchingData(){we.Z.get("http://localhost:3001/projects").then((e=>{setTimeout((()=>{this.projects.push(...e.data)}),2e3)})).catch((e=>console.error(e)))}},computed:{filteredProjects(){return[...this.projects].filter((e=>e.title.toLowerCase().includes(this.searchedText.toLowerCase())))}},mounted(){console.log("Vue скрипт загружен !");const e=document.querySelectorAll("[data--catalog-product]");e.forEach((e=>{const t=e.querySelector("[data-button-open]");t.addEventListener("click",(()=>{this.windowIsOpen=!0,this.currentProduct=e.querySelector(".article-product__title").textContent.replace(/\s /g,"")}))})),this.fetchingData(),window.addEventListener("keydown",(e=>{27===e.keyCode?this.windowIsOpen=!1:this.windowIsOpen=!0}))}};const Me=(0,g.Z)(Ce,[["render",m],["__scopeId","data-v-00a6956f"]]);var Pe=Me,ke=o(65),xe=(0,ke.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});const Ne=(0,r.ri)(Pe);Ne.use(xe).mount("#app")}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,r,n,a){if(!r){var s=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],a=e[d][2];for(var c=!0,l=0;l<r.length;l++)(!1&a||s>=a)&&Object.keys(o.O).every((function(e){return o.O[e](r[l])}))?r.splice(l--,1):(c=!1,a<s&&(s=a));if(c){e.splice(d--,1);var i=n();void 0!==i&&(t=i)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,n,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,a,s=r[0],c=r[1],l=r[2],i=0;if(s.some((function(t){return 0!==e[t]}))){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);if(l)var d=l(o)}for(t&&t(r);i<s.length;i++)a=s[i],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},r=self["webpackChunksave_project"]=self["webpackChunksave_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[998],(function(){return o(2189)}));r=o.O(r)})();
//# sourceMappingURL=app.js.map